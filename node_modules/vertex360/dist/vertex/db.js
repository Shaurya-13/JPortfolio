const path=require("path"),mongoose=require("mongoose");mongoose.Promise=require("bluebird");const BASE_DIR=__dirname+"/../../../../",mongoConnect=(e,n,o)=>{mongoose.connect(e,{useNewUrlParser:!0}).then(e=>{null==o?console.log("DB Connection success."):o()}).catch(e=>{null==n?console.log("Database Connection Failed. Please check the url and make sure the database server is running."):n(e)})},nedbConnect=(e,n,o)=>{let c;(0,require("vertex-camo").connect)(e).then(e=>{c=e,o()}).catch(e=>{console.log("DB ERROR: "+e.message),n(e)})};module.exports={connect:(e,n,o)=>{mongoConnect(e,n,o)},connectMongo:(e,n,o)=>{mongoConnect(e,n,o)},connectNedb:(e,n,o)=>{nedbConnect(e,n,o)},connectPostgres:(e,n)=>{},nedbConfig:(e,n,o)=>({url:e,type:"nedb",onError:e=>{null==o?console.log("DB Connection Failed!"):o(e)},onSuccess:()=>{null==n?console.log("DB Successfully Connected!"):n()}}),nedb:(e,n)=>{const o=process.env.TMP_DIR||"/tmp";return{url:"dev"==process.env.TURBO_ENV?"nedb://"+path.join(BASE_DIR,o):"nedb://"+o,type:"nedb",onError:e=>{null==n?console.log("DB Connection Failed!"):n(e)},onSuccess:()=>{null==e?console.log("DB Successfully Connected!"):e()}}}};